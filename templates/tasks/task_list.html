{#{% extends "base.html" %}#}
{##}
{#{% block content %}#}
{#  <h1>Tasks#}
{#    <a href="{% url 'tasks:task-create' %}" class="btn btn-primary link-to-page">#}
{#      Create Task#}
{#    </a>#}
{#  </h1>#}
{##}
{#  <table class="table table-striped table-hover">#}
{#    <thead>#}
{#    <tr>#}
{#      <th>Name</th>#}
{#      <th>Priority</th>#}
{#      <th>Type</th>#}
{#      <th>Assignees</th>#}
{#      <th>Deadline</th>#}
{#      <th>Completed</th>#}
{#    </tr>#}
{#    </thead>#}
{#    <tbody>#}
{#    {% for task in task_list %}#}
{#      <tr>#}
{#        <td>{{ task.name }}</td>#}
{#        <td>{{ task.priority }}</td>#}
{#        <td>{{ task.task_type.name }}</td>#}
{#        <td>#}
{#          {% for user in task.assignees.all %}#}
{#            {{ user.username }}{% if not forloop.last %}, {% endif %}#}
{#          {% empty %}#}
{#            No assignees#}
{#          {% endfor %}#}
{#        </td>#}
{#        <td>{{ task.deadline|date:"Y-m-d H:i" }}</td>#}
{#        <td>{{ task.is_completed|yesno:"Yes,No" }}</td>#}
{#      </tr>#}
{#    {% empty %}#}
{#      <tr>#}
{#        <td colspan="6">No tasks found.</td>#}
{#      </tr>#}
{#    {% endfor %}#}
{#    </tbody>#}
{#  </table>#}
{#{% endblock %}#}

{% extends "base.html" %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Tasks</h1>
    <a href="{% url 'tasks:task-create' %}" class="btn btn-primary">
      Create Task
    </a>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Deadline</th>
        <th>Priority</th>
        <th>Assignees</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for task in task_list %}
        <tr>
          <td><a href="{% url 'tasks:task-detail' task.id %}">{{ task.name }}</a></td>
          <td>{{ task.deadline }}</td>
          <td>{{ task.priority }}</td>
          <td>
            {% for worker in task.assignees.all %}
              {{ worker.username }}{% if not forloop.last %}, {% endif %}
            {% empty %}
              <em>No one</em>
            {% endfor %}
          </td>
          <td>
            <a href="{% url 'tasks:task-update' task.id %}" class="btn btn-sm btn-warning">Update</a>
            <a href="{% url 'tasks:task-delete' task.id %}" class="btn btn-sm btn-danger">Delete</a>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="5">No tasks yet</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
